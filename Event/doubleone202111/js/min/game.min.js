function checkLogin(){$.ajax({url:"/PersonalLogin/CheckLogin",type:"get",async:!1,contentType:"application/json",beforeSend:function(){},success:function(e){e.data?isLogin=!0:LoginSharedModalByCallFunction(setisLogin)},error:function(e){console.log(e)}})}function setisLogin(){isLogin=!0}function GameStart(){return isLogin?Game.time>0&&21!=Game.time?(alert("遊戲尚未結束,不能重新開始哦!"),void 0):(Game.reset(),Game.init(),Game.start(),Game.startTime(),$(".start").css("display","none"),void 0):(LoginSharedModalByCallFunction(setisLogin),!1)}function scoremodal(){var e=$("#score").text(),t=e.toString(),o=prizeList[6];t>=360?o=prizeList[0]:t>=310?o=prizeList[1]:t>=260?o=prizeList[2]:t>=210?o=prizeList[3]:t>=160?o=prizeList[4]:t>=110&&(o=prizeList[5]),110>t?showModalFail(o):t>=110&&(showModal(o),setTimeout(function(){checkMediaCouponAjax(o.scGroupId)},500))}function copyurl1(){var e=document.getElementById("txt_output1");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),alert("copy success")}function showModal(e){link="<a href="+e.LinkUrl+" target='_blank'>"+e.LinkTitle+"</a>",$("#modal-container1 .modal-content").html("<div class='col-xs-12'><p class='modal-title'>"+e.Message+"</p><p class='modal-ps'>"+link+"</p></div>"),$("#modal-container1").modal()}function showModalFail(e){link="<a href="+e.LinkUrl+" target='_blank'>"+e.LinkTitle+"</a>",$("#modal-container2 .modal-content").html("<div class='col-xs-12'><p class='modal-title'>"+e.Message+"</p><p class='modal-ps'>"+link+"</p></div>"),$("#modal-container2").modal()}function checkMediaCouponAjax(e){$.ajax({url:"/Event/CheckEvnShoopinCash?scGroupId="+e,type:"get",async:!1,contentType:"application/json",beforeSend:function(){},success:function(t){"ok"==t.status?getMediaCouponAjax(e):alert(t.message)},error:function(e){console.log(e)}})}function getMediaCouponAjax(e){$.ajax({url:"/Event/GiveEvntShopingCashByscGroupId",data:JSON.stringify({scGroupId:e}),type:"post",async:!1,contentType:"application/json",beforeSend:function(){},success:function(e){"ok"==e.status?console.log("感謝您！購物金已匯入您的會員帳戶！"):console.log("感謝！您已成功領取，請記得使用喔！")},error:function(e){console.log(e)}})}var isLogin=!1;checkLogin();var prizeList=[{scGroupId:1340,LinkTitle:"一鍵領取",LinkUrl:"https://www.eclife.com.tw/Personal/ShoppingCash/",Message:"看來是擁有金手指的大師，恭喜搶到最高$420品牌購物金，品牌商品滿$4600可使用"},{scGroupId:1339,LinkTitle:"一鍵領取",LinkUrl:"https://www.eclife.com.tw/Personal/ShoppingCash/",Message:"恭喜搶到$360品牌購物金，品牌商品滿$4500可使用"},{scGroupId:1338,LinkTitle:"一鍵領取",LinkUrl:"https://www.eclife.com.tw/Personal/ShoppingCash/",Message:"恭喜搶到$300品牌購物金，品牌商品滿$3700可使用"},{scGroupId:1337,LinkTitle:"一鍵領取",LinkUrl:"https://www.eclife.com.tw/Personal/ShoppingCash/",Message:"恭喜搶到$240品牌購物金，品牌商品滿$3000可使用"},{scGroupId:1336,LinkTitle:"一鍵領取",LinkUrl:"https://www.eclife.com.tw/Personal/ShoppingCash/",Message:"恭喜搶到$180品牌購物金，品牌商品滿$2300可使用"},{scGroupId:1335,LinkTitle:"一鍵領取",LinkUrl:"https://www.eclife.com.tw/Personal/ShoppingCash/",Message:"恭喜搶到$120品牌購物金，滿$1600可使用"},{scGroupId:0,LinkTitle:"選把好鼠鼠吧",LinkUrl:"https://www.eclife.com.tw/MonthEvent/doubleone",Message:"你可能要換把反應更快的滑鼠了…"}],Mouse=function(e){this.mouse=null,this.num=-1,this.hole=-1,this.init(e)};Mouse.prototype={mousetype:{good:"https://img.eclife.com.tw/EDM/11011/doubleone202111/money.png",bad:"https://img.eclife.com.tw/EDM/11011/doubleone202111/money.png",goodkill:"https://img.eclife.com.tw/EDM/11011/doubleone202111/money_touch.png",badkill:"https://img.eclife.com.tw/EDM/11011/doubleone202111/money_touch.png"},init:function(e){e=e||"good";var t=this;this.mouse=document.createElement("div"),this.mouse.mousetype=e,this.mouse.islive=!0,screen.width<992?(this.mouse.style.cssText="width:200px;height:200px;background:url('"+this.mousetype[e]+"') no-repeat;left:50%;transform: translateX(-50%);bottom:-10px;position:absolute;margin:auto;cursor:pointer;",this.mouse.style.backgroundSize="190px 190px",screen.width<768&&(this.mouse.style.cssText="width:150px;height:150px;background:url('"+this.mousetype[e]+"') no-repeat;left:50%;transform: translateX(-35%);bottom:-35px;position:absolute;margin:auto;cursor:pointer;",this.mouse.style.backgroundSize="110px 110px")):(this.mouse.style.cssText="width:200px;height:200px;background:url('"+this.mousetype[e]+"') no-repeat;left:50%;transform: translateX(-45%);bottom:-12px;position:absolute;margin:auto;cursor:pointer;",this.mouse.style.backgroundSize="180px 180px"),this.mouse.onclick=function(e){t.beat(e)}},beat:function(){this.mouse.islive&&(this.mouse.islive=!1,this.onbeat(),this.mouse.style.background="url("+this.mousetype[this.mouse.mousetype+"kill"]+")",screen.width<992?(this.mouse.style.backgroundSize="190px 190px",screen.width<768&&(this.mouse.style.backgroundSize="110px 110px")):this.mouse.style.backgroundSize="180px 180px")},animation:function(e){e=screen.width<992?"fast"==e?30:"normal"==e?70:110:"fast"==e?100:"normal"==e?90:110;var t=this.mouse,o=t.style,s=parseInt(o.top,10),i=5,n=this,a=function(t){t-=i,t>=-40?(o.top=t+"px",setTimeout(function(){a(t)},e)):setTimeout(function(){l(-40)},10*e)},l=function(t){t+=i,s>=t?(o.top=t+"px",setTimeout(function(){l(t)},e)):n.reset()};a(s)},reset:function(){this.mouse.islive=!0,this.mouse.style.background="url("+this.mousetype[this.mouse.mousetype]+")",screen.width<992?(this.mouse.style.backgroundSize="190px 190px",screen.width<768&&(this.mouse.style.backgroundSize="110px 110px")):this.mouse.style.backgroundSize="180px 180px",this.onend()},onbeat:function(){},onend:function(){}};var Game={time:21,mouseMap:{1:"good",2:"bad",3:"good",4:"bad",5:"bad",6:"good",7:"bad",8:"good",9:"good",10:"bad"},allMouse:[],nowScore:0,hasHole:{},hasMouse:{},lis:null,init:function(){this.lis=document.getElementById("panel").getElementsByTagName("li"),_this=this;for(var e=1;10>=e;e++){var t=new Mouse(this.mouseMap[e]);t.onbeat=function(){Game.changeScore(5)},t.onend=function(){var e=_this.lis[this.hole];e.removeChild(e.mouse.mouse),e.mouse=null,_this.hasHole[this.hole]=null,_this.hasMouse[this.num]=null},this.allMouse.push(t)}},changeScore:function(e){this.nowScore+=e,document.getElementById("score").innerHTML=this.nowScore},start:function(){if(!(this.time<=0)){for(var e=this,t=parseInt(9*Math.random(),10);this.hasHole[t];)t=parseInt(9*Math.random(),10);for(var o=parseInt(10*Math.random(),10);this.hasMouse[o];)o=parseInt(10*Math.random(),10);this.allMouse[o].hole=t,this.allMouse[o].num=o,this.lis[t].appendChild(this.allMouse[o].mouse),this.lis[t].mouse=this.allMouse[o],this.lis[t].mouse.animation("normal"),this.hasHole[t]="true",this.hasMouse[o]="true",setTimeout(function(){e.start()},200)}},startTime:function(){this.time-=1;var e=this;document.getElementById("time").innerHTML=this.time,this.time>0&&setTimeout(function(){e.startTime()},1e3),0==this.time&&(scoremodal(),$(".start").css("display","block"))},reset:function(){this.time=21,this.allMouse=[],this.nowScore=0,this.hasHole={},this.hasMouse={},this.lis=null,this.changeScore(0)}};